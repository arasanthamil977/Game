
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>15mm Touch Circle</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  height:200vh;
  background:#04040a;
  overflow-x:hidden;
  font-family:Arial, sans-serif;
}

/* ===== FX LAYER ===== */
#fx-layer{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:9999;
}

/* ===== TOUCH CIRCLE (15 mm â‰ˆ 57px) ===== */
.head{
  position:absolute;
  width:57px;           /* 15 mm */
  height:57px;
  border-radius:50%;
  transform:translate(-50%,-50%);
  background:radial-gradient(circle,
    hsl(var(--h),100%,60%) 0%,
    hsl(var(--h),100%,72%) 35%,
    hsl(var(--h),100%,82%) 55%,
    transparent 72%
  );
  box-shadow:
    0 0 14px hsl(var(--h),100%,60%),
    0 0 32px hsl(var(--h),100%,72%),
    0 0 60px hsl(var(--h),100%,82%);
}

/* ===== LIGHTNING CIRCLE TAIL (unchanged, small) ===== */
.circle{
  position:absolute;
  width:19px;          /* 5 mm tail circles */
  height:19px;
  border-radius:50%;
  border:1.5px solid hsl(var(--h),100%,80%);
  box-shadow:
    0 0 5px hsl(var(--h),100%,75%),
    0 0 10px hsl(var(--h),100%,90%);
  transform:translate(-50%,-50%) scale(0.5);
  animation:circleFade linear forwards;
}

@keyframes circleFade{
  from{
    opacity:1;
    transform:translate(-50%,-50%) scale(0.6);
  }
  to{
    opacity:0;
    transform:translate(-50%,-50%) scale(1.5);
  }
}
</style>
</head>

<body>

<div id="fx-layer"></div>

<script>
const layer = document.getElementById("fx-layer");

/* ===== TOUCH HEAD ===== */
const head = document.createElement("div");
head.className = "head";
layer.appendChild(head);

/* ===== COLOR CONTROL ===== */
let hue = 320;

/* ===== TOUCH STATE ===== */
let active=false;
let lx=0, ly=0, lt=0;

/* Move touch circle */
function moveHead(x,y){
  head.style.left = x+"px";
  head.style.top  = y+"px";
}

/* ===== TAIL (unchanged) ===== */
function circleTail(x, y, dx, dy, speed){
  const count = Math.min(14, Math.max(2, speed / 20));
  const life  = Math.min(420, Math.max(100, speed * 1.8));

  for(let i=0;i<count;i++){
    const c = document.createElement("div");
    c.className = "circle";

    const offset = i * 10;
    c.style.left = (x - dx * 0.12 * offset) + "px";
    c.style.top  = (y - dy * 0.12 * offset) + "px";
    c.style.animationDuration = life + "ms";

    layer.appendChild(c);
    setTimeout(()=>c.remove(), life);
  }
}

/* ===== TOUCH EVENTS ===== */
document.addEventListener("touchstart",e=>{
  active=true;
  const t=e.touches[0];
  lx=t.clientX;
  ly=t.clientY;
  lt=performance.now();
  moveHead(lx,ly);
},{passive:true});

document.addEventListener("touchmove",e=>{
  if(!active) return;

  const t=e.touches[0];
  const now=performance.now();

  const dx=t.clientX-lx;
  const dy=t.clientY-ly;
  const dt=now-lt||1;
  const speed=Math.sqrt(dx*dx+dy*dy)/dt*140;

  /* Auto color change */
  hue += speed * 0.04;
  if(hue>520) hue=320;
  document.documentElement.style.setProperty("--h", hue);

  moveHead(t.clientX,t.clientY);
  circleTail(t.clientX,t.clientY,dx,dy,speed);

  lx=t.clientX;
  ly=t.clientY;
  lt=now;
},{passive:true});

document.addEventListener("touchend",()=>{
  active=false;
  head.style.left="-300px";
});
</script>

</body>
</html>
